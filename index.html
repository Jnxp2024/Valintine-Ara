<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙ‚Ø¯ÛŒÙ… Ø¨Ù‡ Ø§Ø±Ø§ Ø®Ø§Ù†ÙˆÙ…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600&family=Lalezar&family=Vazirmatn:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Vazirmatn', 'Quicksand', sans-serif;
            background: #fff5f7;
            overflow: hidden;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            touch-action: manipulation;
        }

        .farsi-title { font-family: 'Lalezar', cursive; }
        .cursive { font-family: 'Dancing Script', cursive; }

        .heart {
            position: absolute;
            color: #ff4d6d;
            animation: float 6s ease-in infinite;
            opacity: 0;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes float {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            20% { opacity: 0.8; }
            100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid #ffb3c1;
            box-shadow: 0 10px 30px rgba(255, 77, 109, 0.2);
            transition: all 0.5s ease;
            width: 90%;
            max-width: 400px;
        }

        #no-btn {
            transition: all 0.2s ease;
        }

        .hidden-section { display: none; opacity: 0; }
        .fade-in { animation: fadeIn 0.8s forwards; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .typing-cursor {
            border-left: 3px solid #ff4d6d;
            animation: blink 0.7s infinite;
            margin-right: 4px;
        }

        @keyframes blink { 50% { opacity: 0; } }

        .image-container {
            width: 100%;
            max-width: 260px;
            height: 350px;
            overflow: hidden;
            border-radius: 20px;
            border: 5px solid white;
            box-shadow: 0 15px 35px rgba(255, 77, 109, 0.3);
            margin: 0 auto;
        }

        .image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .meme-container {
            width: 150px;
            height: 150px;
            overflow: hidden;
            border-radius: 15px;
            margin: 0 auto 15px;
        }
        
        .meme-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        #typing-text {
            word-wrap: break-word;
            padding: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="heart-container"></div>

    <!-- Background Music -->
    <audio id="bg-music" loop preload="auto">
        <source src="https://cdn.pixabay.com/audio/2022/05/27/audio_1808d30d8a.mp3" type="audio/mpeg">
    </audio>

    <!-- 1. Start Overlay -->
    <div id="start-overlay" class="fixed inset-0 z-50 flex items-center justify-center bg-[#fff5f7] p-4">
        <button id="start-btn" class="bg-[#ff4d6d] text-white px-8 py-4 rounded-full text-xl md:text-2xl font-bold shadow-lg hover:scale-105 active:scale-95 transition-all">
            Ú©Ù„ÛŒÚ© Ú©Ù† Ø§Ø±Ø§ Ø®Ø§Ù†ÙˆÙ… â¤ï¸
        </button>
    </div>

    <!-- 2. Image & Intro Section -->
    <div id="intro-section" class="hidden-section flex-col items-center justify-center w-full px-4">
        <h1 id="intro-typing-text" class="farsi-title text-3xl md:text-4xl text-[#ff4d6d] mb-6 text-center min-h-[40px]"></h1>
        <div class="image-container">
            <img src="https://i.ibb.co/RpxtBc8s/2026-02-06-21-50-10.jpg" alt="Ara">
        </div>
    </div>

    <!-- 3. Typing Animation Section -->
    <div id="typing-section" class="hidden-section w-full max-w-lg px-6 text-center">
        <h2 id="typing-text" class="text-2xl md:text-3xl text-[#ff4d6d] leading-relaxed font-bold"></h2>
        <span class="typing-cursor"></span>
    </div>

    <!-- 4. Final Valentine Card -->
    <div id="main-card" class="hidden-section card relative z-10 p-6 md:p-10 rounded-3xl text-center">
        <div id="question-content">
            <div class="meme-container">
                <img id="meme-image" src="https://i.ibb.co/pvmXs5vX/9aeb08b41847c7def205020d80574dfd.jpg" alt="Cat">
            </div>
            <h1 class="cursive text-3xl md:text-4xl text-[#ff4d6d] mb-3" dir="ltr">Will you be my Valentine?</h1>
            <p class="text-gray-600 mb-6 text-base md:text-lg">Ø§Ú¯Ù‡ Ù‚Ø¨ÙˆÙ„ Ù†Ú©Ù†ÛŒ Ù…ÛŒØ§Ù… Ù…ÛŒØ¯Ø²Ø¯Ù…Øª ÙƒØ§ÙÛŒÙ‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒ</p>
            
            <div class="flex justify-center items-center gap-4 h-16 relative">
                <button id="yes-btn" class="bg-[#ff4d6d] text-white px-6 py-2 rounded-full font-bold text-lg z-20 transition-transform">
                    Yes!
                </button>
                <button id="no-btn" class="bg-gray-200 text-gray-600 px-6 py-2 rounded-full font-bold text-lg whitespace-nowrap">
                    No
                </button>
            </div>
        </div>

        <div id="success-content" class="hidden">
            <div class="mb-4 text-6xl animate-bounce">ğŸ’–</div>
            <h1 class="farsi-title text-4xl text-[#ff4d6d] mb-3">Ø¢Ø® Ø¬ÙˆÙˆÙˆÙˆÙ†!</h1>
            <p class="text-gray-700 text-lg mb-4">Ù…ÛŒâ€ŒØ¯ÙˆÙ†Ø³ØªÙ… Ù‚Ø¨ÙˆÙ„ Ù…ÛŒâ€ŒÚ©Ù†ÛŒ! Ø·Ø§Ù‚Øª Ù†Ø¯Ø§Ø±Ù… ØªØ§ ÙˆÙ„Ù†ØªØ§ÛŒÙ† ØµØ¨Ø± Ú©Ù†Ù….</p>
            <div class="text-pink-400 text-xl font-bold">Ø®ÛŒÙ„ÛŒ Ø¯ÙˆØ³ØªØª Ø¯Ø§Ø±Ù…! âœ¨</div>
        </div>
    </div>

    <canvas id="confetti" class="fixed inset-0 pointer-events-none z-50"></canvas>

    <script>
        const startBtn = document.getElementById('start-btn');
        const startOverlay = document.getElementById('start-overlay');
        const bgMusic = document.getElementById('bg-music');
        const introSection = document.getElementById('intro-section');
        const introTypingElem = document.getElementById('intro-typing-text');
        const typingSection = document.getElementById('typing-section');
        const typingTextElem = document.getElementById('typing-text');
        const mainCard = document.getElementById('main-card');
        const heartContainer = document.getElementById('heart-container');
        
        const introString = "Ø³Ù„Ø§Ù… Ø§Ø±Ø§ Ø®Ø§Ù†ÙˆÙ… â¤ï¸";
        const fullLoveText = "Ø¯ÙˆØ³ØªØª Ø¯Ø§Ø±Ù…ØŒ Ø®ÛŒÙ„ÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÛŒÙ„ÛŒ Ø²ÛŒØ§Ø¯.";

        // Start Logic
        startBtn.addEventListener('click', () => {
            startOverlay.style.display = 'none';
            
            // Fixed Audio playback with promise handling
            bgMusic.volume = 0.4;
            const playPromise = bgMusic.play();
            if (playPromise !== undefined) {
                playPromise.catch(error => {
                    console.log("Ù¾Ø®Ø´ Ø®ÙˆØ¯Ú©Ø§Ø± Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ù…ØªÙˆÙ‚Ù Ø´Ø¯ ÛŒØ§ Ø¨Ø§ Ø®Ø·Ø§ Ù…ÙˆØ§Ø¬Ù‡ Ø´Ø¯:", error);
                });
            }

            introSection.style.display = 'flex';
            introSection.classList.add('fade-in');
            
            let j = 0;
            function typeIntro() {
                if (j < introString.length) {
                    introTypingElem.innerHTML += introString.charAt(j);
                    j++;
                    setTimeout(typeIntro, 120);
                } else {
                    setTimeout(startTypingPhase, 3500); 
                }
            }
            typeIntro();
        });

        // Typing Phase
        function startTypingPhase() {
            introSection.classList.remove('fade-in');
            introSection.style.display = 'none';
            typingSection.style.display = 'block';
            typingSection.classList.add('fade-in');

            let i = 0;
            function type() {
                if (i < fullLoveText.length) {
                    typingTextElem.innerHTML += fullLoveText.charAt(i);
                    i++;
                    setTimeout(type, 50);
                } else {
                    setTimeout(showValentineCard, 1500);
                }
            }
            type();
        }

        function showValentineCard() {
            typingSection.style.display = 'none';
            mainCard.style.display = 'block';
            mainCard.classList.add('fade-in');
        }

        // Hearts Animation
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerHTML = ['â¤ï¸', 'ğŸ’–', 'ğŸ’—', 'ğŸ’“', 'ğŸ’•'][Math.floor(Math.random() * 5)];
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 3 + 3) + 's';
            heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
            heartContainer.appendChild(heart);
            setTimeout(() => heart.remove(), 6000);
        }
        setInterval(createHeart, 400);

        // Buttons interaction
        const noBtn = document.getElementById('no-btn');
        const yesBtn = document.getElementById('yes-btn');
        const questionContent = document.getElementById('question-content');
        const successContent = document.getElementById('success-content');
        const memeImage = document.getElementById('meme-image');

        const noTexts = ['Ù…ÛŒØ§Ù…Ø§Ø§Ø§Ø§', 'Ø¨Ø§Ø¨Ø§ Ø§Ù…Ø¯Ù…Ø§Ø§Ø§Ø§', 'Ø¨Ø®Ø¯Ø§ Ù…ÛŒØ§Ù…Ø§Ø§Ø§Ø§Ø§Ø§Ø§Ø§', 'Ø¨Ø§Ø¨Ø§ Ù‚Ø¨ÙˆÙ„ Ú©Ù† Ø¯ÛŒÚ¯Ù‡ :('];
        const memeImages = [
            'https://i.ibb.co/pvmXs5vX/9aeb08b41847c7def205020d80574dfd.jpg', 
            'https://i.ibb.co/CpXhGVhG/funny-cat-memes-go-hard-cover-675.jpg', 
            'https://i.ibb.co/Zzt7vhbd/bf6e296386c67b027cd3d234e3c6efa4.jpg',  
            'https://i.ibb.co/PGkj2KHZ/63408e9ff4d02f15590f6279-lad-studio-hello-kitty-crying-cat-meme.jpg'
        ];
        let clickCount = 0;

        noBtn.addEventListener('click', () => {
            if (clickCount < noTexts.length) {
                noBtn.innerText = noTexts[clickCount];
                if (clickCount + 1 < memeImages.length) {
                    memeImage.src = memeImages[clickCount + 1];
                }
                const currentScale = parseFloat(yesBtn.style.transform.replace('scale(', '').replace(')', '')) || 1;
                yesBtn.style.transform = `scale(${currentScale + 0.3})`;
                clickCount++;
            }
            if (clickCount === noTexts.length) {
                 noBtn.style.opacity = '0.5';
                 noBtn.style.cursor = 'not-allowed';
            }
        });

        yesBtn.addEventListener('click', () => {
            questionContent.classList.add('hidden');
            successContent.classList.remove('hidden');
            startConfetti();
        });

        // Confetti
        const canvas = document.getElementById('confetti');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function startConfetti() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            for(let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    size: Math.random() * 8 + 4,
                    color: `hsl(${Math.random() * 20 + 340}, 100%, 70%)`,
                    speed: Math.random() * 3 + 2,
                    angle: Math.random() * 6.28
                });
            }
            animateConfetti();
        }
        function animateConfetti() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
                p.y += p.speed;
                p.x += Math.sin(p.angle) * 2;
                ctx.fillStyle = p.color;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size/2, 0, Math.PI * 2);
                ctx.fill();
                if(p.y > canvas.height) p.y = -10;
            });
            requestAnimationFrame(animateConfetti);
        }
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>